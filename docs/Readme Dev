# ğŸ‘¨â€ğŸ’» WhatsApp ChatGPT Bot â€“ Modo Desenvolvimento

Este documento Ã© voltado para quem deseja executar e testar o projeto localmente em ambiente de desenvolvimento, com foco em aprendizado, testes e contribuiÃ§Ã£o.

---

## ğŸ” O que este projeto faz?

Este sistema automatiza conversas inteligentes no WhatsApp, simulando um atendente ou vendedor. Ele Ã© construÃ­do com:

- Node.js + TypeScript (backend)
- API da OpenAI (ChatGPT) para respostas
- IntegraÃ§Ã£o com WhatsApp via API (Twilio ou Meta)
- Banco de dados MySQL (armazenar clientes e interaÃ§Ãµes)
- Swagger UI para documentaÃ§Ã£o automÃ¡tica
- Testes com Jest e Supertest

---

## ğŸ§  Como funciona?

Quando uma mensagem Ã© enviada para o nÃºmero do WhatsApp configurado, ela Ã© recebida via webhook (`/webhook`). O sistema:

1. Valida e registra a mensagem
2. Identifica o estÃ¡gio da conversa (abordagem, proposta, etc.)
3. Gera uma resposta com base nos prompts e no perfil do cliente
4. Envia a resposta de volta usando a API do WhatsApp

Tudo isso com delays humanizados, limite de requisiÃ§Ãµes, e rastreamento de cada conversa no banco.

---

## âš™ï¸ Requisitos

- Node.js v18+
- MySQL 5.7+
- Conta de desenvolvedor na OpenAI
- Conta Twilio ou Meta API (modo sandbox de testes)

---

## ğŸš€ InstalaÃ§Ã£o Local

### 1. Clone o projeto

```bash
git clone <URL-do-repo>
cd whatsapp-chatgpt-bot
```

### 2. Instale dependÃªncias

```bash
npm install
```

### 3. Copie e edite o arquivo `.env`

```bash
cp .env.example .env
# Edite com suas credenciais OpenAI, Twilio/Meta, e banco MySQL
```

### 4. Inicie o servidor em modo dev

```bash
npm run dev
```

### 5. Acesse a documentaÃ§Ã£o da API

```
http://localhost:3000/api-docs
```

---

## ğŸ§ª Testes Automatizados

Execute todos os testes com:

```bash
npm test
```

> Cobertura mÃ­nima esperada: 80%

Estrutura de testes:

- `src/tests/unit/` â€“ Testes de funÃ§Ãµes isoladas (Jest)
- `src/tests/integration/` â€“ Testes das rotas com Supertest
- `src/tests/e2e/` â€“ Fluxo completo de interaÃ§Ã£o

---

## ğŸ§¾ Scripts Ãºteis

```json
"scripts": {
  "dev": "ts-node-dev --respawn src/server.ts",
  "build": "tsc",
  "start": "node dist/server.js",
  "lint": "eslint 'src/**/*.ts'",
  "format": "prettier --write 'src/**/*.ts'",
  "test": "jest --coverage"
}
```

---

## ğŸ“‚ Estrutura do Projeto

```
src/
â”œâ”€â”€ api/                 # OpenAI, Twilio/META API
â”œâ”€â”€ config/              # env, swagger, etc
â”œâ”€â”€ controllers/         # webhook principal
â”œâ”€â”€ middlewares/         # validaÃ§Ã£o, erros, rate-limit
â”œâ”€â”€ prompts/             # etapas do funil de vendas
â”œâ”€â”€ routes/              # rotas Express
â”œâ”€â”€ services/            # lÃ³gica de negÃ³cios
â”œâ”€â”€ tests/               # testes automatizados
â”œâ”€â”€ utils/               # db, logger
â”œâ”€â”€ app.ts               # configura express
â””â”€â”€ server.ts            # ponto de entrada
```

---

## â“ DÃºvidas Frequentes

**Como simular mensagens do WhatsApp?**
VocÃª pode usar o painel de testes da Twilio ou do Meta Developer para enviar mensagens ao webhook.

**Preciso pagar para testar?**
NÃ£o. Ã‰ possÃ­vel testar com contas sandbox (Twilio) ou tokens temporÃ¡rios (Meta Cloud API).

---

> Para produÃ§Ã£o e deploy em VPS, consulte o documento `README ProduÃ§Ã£o`.
